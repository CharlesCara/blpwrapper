---
title:      RBloomberg Manual
author:     Ana Nelson
created_at: 2009-01-30 13:08:32.468894 +00:00
dirty: true
filter:
  - erb
  - idio
---

\section{About RBloomberg} % (fold)
\label{sec:about}

RBloomberg is an R package which handles fetching data from the Bloomberg financial data application. RBloomberg was written by Robert Sams, see the package README for additional contributors and acknowledgements. RBloomberg is released under a GPL open source license.

% section about (end)

\section{Installation and Requirements} % (fold)
\label{sec:installation_and_requirements}

\subsection{Installation} % (fold)
\label{sub:installation}

RBloomberg will only work on a Bloomberg workstation, using the Desktop COM API. This version requires the rcom R package, which in turn depends on \href{http://rcom.univie.ac.at/}{statconnDCOM} which is a COM server that, while free, is not open source. Support for the Bloomberg Version 3 Java API is in development. When rcom is installed, it will give instructions on how to install statconnDCOM. If you install RBloomberg via

\begin{verbatim}
  install.packages("RBloomberg", repos="http://R-Forge.R-project.org")
\end{verbatim}

then rcom will automatically be installed for you if you don't have it.

% subsection installation (end)

\subsection{Hello, World} % (fold)
\label{sub:hello_world}

Once you have RBloomberg installed, load the library just like any other via:
<%= lidio("examples/hello-world.R", "library") %>

The first order of business is to connect to the Bloomberg data application, and store a reference to this connection object. You will use this in all subsequent calls:
<%= lidio("examples/hello-world.R", "connect") %>

Then we can make a simple request to ensure that the connection is working:
<%= lidio("examples/hello-world.R", "basic-request") %>

The result of running these three commands should be something like this:
<%= lidio(File.join(EXAMPLES_DIRECTORY, "hello-world.Rout")) %>

% subsection hello_world (end)

\subsection{Unit Tests} % (fold)
\label{sub:unit_tests}

Tests are live code examples that are tested for the expected output. They are useful to developers as a code quality tool, and they can also be very useful to users to help ensure everything is running smoothly and also as an extra source of reference material. Should you not be able to find the information you need in formal documentation (this is general advice, not just pertaining to RBloomberg), look for tests and study the syntax of examples there.

To ensure that everything is running smoothly, we recommend that you run the RUnit test suite:
<%= lidio("examples/run-unit-tests.R", "run") %>

The output of printTextProtocol should look like this:
<%= lidio(File.join(EXAMPLES_DIRECTORY, "unit-test-results.txt")) %>

In particular, take note of any errors or failures. Hopefully you will have none of either.

% subsection unit_tests (end)

% section installation_and_requirements (end)

\section{Getting Current Data} % (fold)
\label{sec:getting_current_data}

This section covers getting current, i.e. non-historical, data from Bloomberg. This may be live (or delayed as per your availability) market data, or static descriptive data.

Note that the fields employed here are the same fields you may be familiar with using the Excel add-in, and the FLDS function within your Bloomberg terminal is a convenient way to search for fields.

\subsection{Basic Calls} % (fold)
\label{sub:basic_calls}

You have already seen the simplest type of call you can make. At minimum we need to pass a connection object, a single ticker, and a single field.
<%= lidio("examples/current-basic-calls.R", "minimal") %>

This can be expanded by passing vectors of tickers and/or fields, to obtain data on multiple securities at once, or to return multiple fields at once, or both.
<%= lidio("examples/current-basic-calls.R", "lists") %>

And, of course, you can pass these arguments by way of variables, just as you might for any other R function:
<%= lidio("examples/current-basic-calls.R", "variables") %>

The data returned from these calls will look something like this:
<%= lidio(File.join(EXAMPLES_DIRECTORY, "current-basic-calls-output.txt")) %>

% subsection basic_calls (end)

\subsection{Using Overrides} % (fold)
\label{sub:using_overrides}

The Bloomberg API allows you to make certain overrides to change the value that a function returns. We give a few examples here, to determine whether a field you wish to request can be overridden, consult the FLDS screen in your Bloomberg terminal (look for What Overrides Me), or use the what.overrides.me() function discussed below to look up overrides within R.

A common use for overrides is to return data in a currency other than the security's default currency.
<%= lidio("examples/current-override-calls.R", "currency") %>
<%= lidio(File.join(EXAMPLES_DIRECTORY, "override-currency.out")) %>

Another very useful function involving overrides is the Custom Total Return family of calls. We can first use some of the helper functions to find the tickers by searching the list of available mnemonics, and to determine which overrides are available and which fields they apply to.
<%= lidio("examples/current-override-calls.R", "search-mnemonics") %>
<%= lidio(File.join(EXAMPLES_DIRECTORY, "search-mnemonics.out")) %>

Once we know the fields, we can construct our call to fetch the desired data:
<%= lidio("examples/current-override-calls.R", "total-return") %>
<%= lidio(File.join(EXAMPLES_DIRECTORY, "override-total-return.out")) %>

As you can see from this example, it is possible to specify multiple overrides in a single request. The only restriction is to list the overrides in corresponding order to the fields passed to override_fields.

% subsection using_overrides (end)

% section getting_current_data (end)