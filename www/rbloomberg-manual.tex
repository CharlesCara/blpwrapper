\documentclass[a4paper]{article}
\usepackage{fullpage}
\usepackage{fancyvrb}
\usepackage{color}
\usepackage[ascii]{inputenc}
\usepackage{hyperref}
\usepackage[pdftex]{graphicx}
\usepackage{wrapfig}
\usepackage{multicol}

\newcommand\at{@}
\newcommand\lb{[}
\newcommand\rb{]}
\newcommand\PYbo[1]{\textcolor[rgb]{0.73,0.73,0.73}{#1}}
\newcommand\PYbn[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYbm[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYbl[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYbk[1]{\textcolor[rgb]{1.00,0.65,0.00}{#1}}
\newcommand\PYbj[1]{\textcolor[rgb]{1.00,1.00,1.00}{\textbf{#1}}}
\newcommand\PYbi[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYbh[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYbg[1]{\textcolor[rgb]{0.42,0.72,0.15}{\textbf{#1}}}
\newcommand\PYbf[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYbe[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYbd[1]{\textcolor[rgb]{0.14,0.56,0.62}{#1}}
\newcommand\PYbc[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYbb[1]{\textcolor[rgb]{0.27,0.50,0.81}{\underline{#1}}}
\newcommand\PYba[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYbq[1]{\textcolor[rgb]{0.42,0.72,0.15}{\textbf{#1}}}
\newcommand\PYbp[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYaJ[1]{\textcolor[rgb]{0.42,0.72,0.15}{\textbf{#1}}}
\newcommand\PYaK[1]{\colorbox[rgb]{0.89,0.82,0.82}{\textcolor[rgb]{0.65,0.09,0.09}{#1}}}
\newcommand\PYaH[1]{\textcolor[rgb]{0.82,0.14,0.14}{#1}}
\newcommand\PYaI[1]{\textcolor[rgb]{0.82,0.14,0.14}{#1}}
\newcommand\PYaN[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYaO[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYaL[1]{\textcolor[rgb]{0.42,0.72,0.15}{\textbf{#1}}}
\newcommand\PYaM[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYaB[1]{\textcolor[rgb]{0.35,0.60,0.10}{#1}}
\newcommand\PYaC[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYaA[1]{\textcolor[rgb]{0.42,0.72,0.15}{\textbf{#1}}}
\newcommand\PYaF[1]{\textcolor[rgb]{1.00,0.65,0.00}{#1}}
\newcommand\PYaG[1]{\textcolor[rgb]{0.60,0.60,0.60}{\textit{#1}}}
\newcommand\PYaD[1]{\textcolor[rgb]{0.14,0.56,0.62}{#1}}
\newcommand\PYaE[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYaZ[1]{\textcolor[rgb]{1.00,1.00,1.00}{\underline{#1}}}
\newcommand\PYaX[1]{\textcolor[rgb]{0.21,0.47,0.66}{#1}}
\newcommand\PYaY[1]{\textcolor[rgb]{0.60,0.60,0.60}{\textit{#1}}}
\newcommand\PYaR[1]{\textcolor[rgb]{0.80,0.16,0.16}{\textbf{#1}}}
\newcommand\PYaS[1]{\textcolor[rgb]{0.27,0.50,0.81}{\underline{#1}}}
\newcommand\PYaP[1]{\textcolor[rgb]{0.27,0.50,0.81}{#1}}
\newcommand\PYaQ[1]{\textcolor[rgb]{0.40,0.40,0.40}{#1}}
\newcommand\PYaV[1]{\textcolor[rgb]{0.21,0.47,0.66}{#1}}
\newcommand\PYaW[1]{\textcolor[rgb]{0.25,1.00,1.00}{#1}}
\newcommand\PYaT[1]{\textcolor[rgb]{0.67,0.67,0.67}{#1}}
\newcommand\PYaU[1]{\textcolor[rgb]{0.73,0.73,0.73}{#1}}
\newcommand\PYaj[1]{\textcolor[rgb]{0.25,1.00,1.00}{#1}}
\newcommand\PYak[1]{\textcolor[rgb]{0.42,0.72,0.15}{#1}}
\newcommand\PYah[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYai[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYan[1]{\textcolor[rgb]{0.82,0.82,0.82}{\textbf{#1}}}
\newcommand\PYao[1]{\textcolor[rgb]{0.21,0.47,0.66}{#1}}
\newcommand\PYal[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYam[1]{\colorbox[rgb]{0.32,0.00,0.00}{\textcolor[rgb]{0.90,0.03,0.03}{\textbf{#1}}}}
\newcommand\PYab[1]{\textcolor[rgb]{0.82,0.82,0.82}{\textit{#1}}}
\newcommand\PYac[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYaa[1]{\textcolor[rgb]{0.80,0.80,0.80}{#1}}
\newcommand\PYaf[1]{\textcolor[rgb]{0.60,0.60,0.60}{\textit{#1}}}
\newcommand\PYag[1]{\textcolor[rgb]{0.21,0.47,0.66}{#1}}
\newcommand\PYad[1]{\textcolor[rgb]{0.82,0.14,0.14}{#1}}
\newcommand\PYae[1]{\textcolor[rgb]{0.21,0.47,0.66}{#1}}
\newcommand\PYaz[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}
\newcommand\PYax[1]{\textcolor[rgb]{0.42,0.72,0.15}{\textbf{#1}}}
\newcommand\PYay[1]{\textcolor[rgb]{0.21,0.47,0.66}{#1}}
\newcommand\PYar[1]{\textcolor[rgb]{0.25,1.00,1.00}{#1}}
\newcommand\PYas[1]{\textcolor[rgb]{0.25,1.00,1.00}{#1}}
\newcommand\PYap[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYaq[1]{\textcolor[rgb]{0.42,0.72,0.15}{\textbf{#1}}}
\newcommand\PYav[1]{\textcolor[rgb]{0.25,1.00,1.00}{#1}}
\newcommand\PYaw[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYat[1]{\textcolor[rgb]{0.93,0.62,0.07}{#1}}
\newcommand\PYau[1]{\textcolor[rgb]{0.82,0.82,0.82}{#1}}



\title{RBloomberg Manual}
\author{Ana Nelson}

\begin{document}

\maketitle


\section{About RBloomberg} % (fold)
\label{sec:about}

RBloomberg is an R package which handles fetching data from the Bloomberg financial data application. RBloomberg was written by Robert Sams, see the package README for additional contributors and acknowledgements. RBloomberg is released under a GPL open source license.

To download the latest version of this document, please visit the \href{http://rbloomberg.r-forge.r-project.org}{RBloomberg home page}.

% section about (end)

\section{Installation and Requirements} % (fold)
\label{sec:installation_and_requirements}

\subsection{Installation} % (fold)
\label{sub:installation}

RBloomberg will only work on a Bloomberg workstation, using the Desktop COM API. This version requires the rcom R package, which in turn depends on \href{http://rcom.univie.ac.at/}{statconnDCOM} which is a COM server that, while free, is not open source. Support for the Bloomberg Version 3 Java API is in development. When rcom is installed, it will give instructions on how to install statconnDCOM. If you install RBloomberg via

\begin{verbatim}
  install.packages("RBloomberg", repos="http://R-Forge.R-project.org")
\end{verbatim}

then rcom will automatically be installed for you if you don't have it.

% subsection installation (end)

\subsection{Hello, World} % (fold)
\label{sub:hello_world}

Once you have RBloomberg installed, load the library just like any other via:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
library(RBloomberg)
\end{Verbatim}

    

The first order of business is to connect to the Bloomberg data application, and store a reference to this connection object. You will use this in all subsequent calls:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=2,stepnumber=1]
conn @PYbd[<-] blpConnect()
\end{Verbatim}

    

Then we can make a simple request to ensure that the connection is working:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=3,stepnumber=1]
blp(conn, @PYaB["]@PYaB[RYA ID Equity"], @PYaB["]@PYaB[NAME"])
\end{Verbatim}

    

The result of running these three commands should be something like this:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
> library(RBloomberg)
Loading required package: rcom
Loading required package: rscproxy
Loading required package: zoo

Attaching package: 'zoo'


	The following object(s) are masked from package:base :

	 as.Date.numeric 

Loading required package: bitops
Loading required package: RUnit
Contents of bbfields have been stored in .bbfields in the current workspace
Contents of bbfields.ovr have been stored in .ovr in the current workspace

Attaching package: 'RBloomberg'


	The following object(s) are masked from package:base :

	 toString 

> conn <- blpConnect()
> blp(conn, "RYA ID Equity", "NAME")
                              NAME
RYA ID EQUITY RYANAIR HOLDINGS PLC
> 
\end{Verbatim}

    

% subsection hello_world (end)

\subsection{Unit Tests} % (fold)
\label{sub:unit_tests}

Tests are live code examples that are tested for the expected output. They are useful to developers as a code quality tool, and they can also be very useful to users to help ensure everything is running smoothly and also as an extra source of reference material. Should you not be able to find the information you need in formal documentation (this is general advice, not just pertaining to RBloomberg), look for tests and study the syntax of examples there.

To ensure that everything is running smoothly, we recommend that you run the RUnit test suite:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=2,stepnumber=1]
testResults @PYbd[<-] runTestSuite(allBloombergTests)
printTextProtocol(testResults)
\end{Verbatim}

    

The output of printTextProtocol should look like this:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
RUNIT TEST PROTOCOL -- Fri Jun 26 15:14:39 2009 
*********************************************** 
Number of test functions: 14 
Number of errors: 0 
Number of failures: 0 

 
1 Test Suite : 
All Tests - 14 test functions, 0 errors, 0 failures



Details 
*************************** 
Test Suite: All Tests 
Test function regexp: ^test.+ 
Test file regexp: Test.R$ 
Involved directory: 
C:/PROGRA~1/R/R-29~1.0/library/RBloomberg/runit-tests 
--------------------------- 
Test file: C:/PROGRA~1/R/R-29~1.0/library/RBloomberg/runit-tests/blpGetDataTest.R 
test.basic: (2 checks) ... OK (2.58 seconds)
test.overrides: (9 checks) ... OK (3.09 seconds)
--------------------------- 
Test file: C:/PROGRA~1/R/R-29~1.0/library/RBloomberg/runit-tests/blpJavaTest.R 
test.java.basic: (0 checks) ... OK (3.75 seconds)
--------------------------- 
Test file: C:/PROGRA~1/R/R-29~1.0/library/RBloomberg/runit-tests/blpToolsTest.R 
test.category.name: (1 checks) ... OK (0.04 seconds)
test.data.type.for.list.of.fields: (1 checks) ... OK (0.03 seconds)
test.data.type.for.single.field: (1 checks) ... OK (0 seconds)
test.field.info.raises.error.on.invalid.mnemonic: (1 checks) ... OK (0.02 seconds)
test.field.name.for.list.of.fields: (1 checks) ... OK (0.04 seconds)
test.field.name.for.single.field: (1 checks) ... OK (0 seconds)
test.historical: (1 checks) ... OK (0.03 seconds)
test.is.power.of.two: (4 checks) ... OK (0 seconds)
test.static: (1 checks) ... OK (0 seconds)
test.what.i.override: (2 checks) ... OK (0.04 seconds)
test.what.overides.me: (2 checks) ... OK (0.03 seconds)
\end{Verbatim}

    

In particular, take note of any errors or failures. Hopefully you will have none of either.

% subsection unit_tests (end)

% section installation_and_requirements (end)

\section{Getting Current Data} % (fold)
\label{sec:getting_current_data}

This section covers getting current, i.e. non-historical, data from Bloomberg. This may be live (or delayed as per your availability) market data, or static descriptive data. All such data is called using the blp() function, as defined below:


\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=6,stepnumber=1]
blp @PYbd[<-] @PYap[function](conn, securities, fields, start @PYbd[=] @PYaD[NULL], end @PYbd[=] @PYaD[NULL],
                                barsize @PYbd[=] @PYaD[NULL], barfields @PYbd[=] @PYaD[NULL], retval @PYbd[=] @PYaD[NULL], 
                                override_fields @PYbd[=] @PYaD[NULL], overrides @PYbd[=] @PYaD[NULL], currency @PYbd[=] @PYaD[NULL]) {
\end{Verbatim}

    

As we will always be passing a connection object, securities and fields, these are typically not named parameters. It is usually more convenient to name later parameters, except perhaps for start and end, rather than trying to remember the order of them all.

Note that the fields employed here are the same fields you may be familiar with using the Excel add-in, and the FLDS function within your Bloomberg terminal is a convenient way to search for fields.

\subsection{Basic Calls} % (fold)
\label{sub:basic_calls}

You have already seen the simplest type of call you can make. At minimum we need to pass a connection object, a single ticker, and a single field.

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=4,stepnumber=1]
blp(conn, @PYaB["]@PYaB[RYA ID Equity"], @PYaB["]@PYaB[PX_LAST"])
\end{Verbatim}

    

This can be expanded by passing vectors of tickers and/or fields, to obtain data on multiple securities at once, or to return multiple fields at once, or both.

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=5,stepnumber=1]
blp(conn, c(@PYaB["]@PYaB[IBM US Equity"], @PYaB["]@PYaB[MSFT US Equity"]), c(@PYaB["]@PYaB[NAME"], @PYaB["]@PYaB[PX_LAST"]))
\end{Verbatim}

    

And, of course, you can pass these arguments by way of variables, just as you might for any other R function:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=6,stepnumber=1]
securities @PYbd[<-] @PYaB["]@PYaB[ED1 Comdty"]
fields @PYbd[<-] c(@PYaB["]@PYaB[NAME"], @PYaB["]@PYaB[PX_LAST"], @PYaB["]@PYaB[OPEN"])
blp(conn, securities, fields)
\end{Verbatim}

    

The data returned from these calls will look something like this:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
              PX_LAST
RYA ID EQUITY   3.305
                                      NAME PX_LAST
IBM US EQUITY  INTL BUSINESS MACHINES CORP  105.77
MSFT US EQUITY              MICROSOFT CORP   23.52
                              NAME PX_LAST  OPEN
ED1 COMDTY Generic 1st 'ED' Future  99.335 99.32
\end{Verbatim}

    

% subsection basic_calls (end)

\subsection{Using Overrides} % (fold)
\label{sub:using_overrides}

The Bloomberg API allows you to make certain overrides to change the value that a function returns. We give a few examples here, to determine whether a field you wish to request can be overridden, consult the FLDS screen in your Bloomberg terminal (look for What Overrides Me), or use the what.overrides.me() function discussed below to look up overrides within R.

A common use for overrides is to return data in a currency other than the security's default currency.

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=4,stepnumber=1]
blp(conn, @PYaB["]@PYaB[RYA ID Equity"], @PYaB["]@PYaB[PX_LAST"])
blp(conn, @PYaB["]@PYaB[RYA ID Equity"], @PYaB["]@PYaB[CRNCY_ADJ_PX_LAST"])

blp(conn, @PYaB["]@PYaB[RYA ID Equity"], @PYaB["]@PYaB[CRNCY_ADJ_PX_LAST"], 
   override_fields @PYbd[=] @PYaB["]@PYaB[EQY_FUND_CRNCY"], overrides @PYbd[=] @PYaB["]@PYaB[HKD"])

blp(conn, @PYaB["]@PYaB[RYA ID Equity"], @PYaB["]@PYaB[CRNCY_ADJ_PX_LAST"], 
   override_fields @PYbd[=] @PYaB["]@PYaB[EQY_FUND_CRNCY"], overrides @PYbd[=] @PYaB["]@PYaB[GBP"])
\end{Verbatim}

    

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
              PX_LAST
RYA ID EQUITY   3.305
              CRNCY_ADJ_PX_LAST
RYA ID EQUITY             3.305
              CRNCY_ADJ_PX_LAST
RYA ID EQUITY          36.04926
              CRNCY_ADJ_PX_LAST
RYA ID EQUITY          2.825401
\end{Verbatim}

    

Another very useful function involving overrides is the Custom Total Return family of calls. We can first use some of the helper functions to find the tickers by searching the list of available mnemonics, and to determine which overrides are available and which fields they apply to.

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=16,stepnumber=1]
cat(@PYaB["]@PYaB[search all mnemonics to find all with CUST_TRR\n"])
search.mnemonics(@PYaB["]@PYaB[CUST_TRR"])

cat(@PYaB["]@PYaB[find out which fields override CUST_TRR_RETURN\n"])
what.overrides.me(@PYaB["]@PYaB[CUST_TRR_RETURN"])

cat(@PYaB["]@PYaB[find our which fields are overridden by CUST_TRR_CRNCY\n"])
what.i.override(@PYaB["]@PYaB[CUST_TRR_CRNCY"])
\end{Verbatim}

    

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
search all mnemonics to find all with CUST_TRR
@lb[]1@rb[] "CUST_TRR_CRNCY"              "CUST_TRR_DVD_TYP"           
@lb[]3@rb[] "CUST_TRR_END_DT"             "CUST_TRR_RETURN"            
@lb[]5@rb[] "CUST_TRR_RETURN_ANNUALIZED"  "CUST_TRR_RETURN_HOLDING_PER"
@lb[]7@rb[] "CUST_TRR_START_DT"          
find out which fields override CUST_TRR_RETURN
@lb[]1@rb[] "CUST_TRR_DVD_TYP"  "CUST_TRR_START_DT" "CUST_TRR_END_DT"  
@lb[]4@rb[] "CUST_TRR_CRNCY"   
find our which fields are overridden by CUST_TRR_CRNCY
@lb[]1@rb[] "CUST_TRR_RETURN_ANNUALIZED"  "CUST_TRR_RETURN_HOLDING_PER"
\end{Verbatim}

    

Once we know the fields, we can construct our call to fetch the desired data:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=27,stepnumber=1]
blp(conn, @PYaB["]@PYaB[MSFT US Equity"], c(@PYaB["]@PYaB[CUST_TRR_RETURN"]),
   override_fields @PYbd[=] c(@PYaB["]@PYaB[CUST_TRR_START_DT"], @PYaB["]@PYaB[CUST_TRR_END_DT"]), 
   overrides @PYbd[=] c(@PYaB["]@PYaB[20080215"], @PYaB["]@PYaB[20080602"])
)

blp(conn, @PYaB["]@PYaB[MSFT US Equity"], 
   c(@PYaB["]@PYaB[CUST_TRR_RETURN"]), 
   override_fields @PYbd[=] c(@PYaB["]@PYaB[CUST_TRR_START_DT"], @PYaB["]@PYaB[CUST_TRR_END_DT"], @PYaB["]@PYaB[CUST_TRR_CRNCY"]), 
   overrides @PYbd[=] c(@PYaB["]@PYaB[20080215"], @PYaB["]@PYaB[20080602"], @PYaB["]@PYaB[GBP"])
)
\end{Verbatim}

    

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
               CUST_TRR_RETURN
MSFT US EQUITY         -4.7736
               CUST_TRR_RETURN
MSFT US EQUITY         -5.9796
\end{Verbatim}

    

As you can see from this example, it is possible to specify multiple overrides in a single request. Take care to list the overrides in corresponding order to the fields passed to override\_fields.

Note that dates must be passed as strings in the form ``YYYYMMDD''. If you pass an invalid override field, or one that doesn't apply to the main field you are requesting, this will be silently ignored. So, make sure you know that your request is valid before you count on the returned value being correct. This is a feature rather than a bug since it makes it possible to specify override fields which only apply to 1 field requested. So, you can ask for CRNCY\_ADJ\_PX\_LAST and NAME in the same request, and you don't get an error saying that EQY\_FUND\_CRNCY doesn't apply to the NAME field.

% subsection using_overrides (end)

\subsection{Format of Returned Data} % (fold)
\label{sub:format_of_returned_data}

By default, RBloomberg returns a data frame for current requests and a zoo for historical data. You can specify a particular format using the retval parameter. retval can take options "raw", "matrix", "zoo" or "data.frame". Remember that for a matrix, all values must be of the same data type. Hence, dates will not appear in date format in a matrix. The "raw" retval is useful for troubleshooting if you receive an error message which originated in the data conversion process.

% subsection format_of_returned_data (end)

% section getting_current_data (end)

\section{Field Information} % (fold)
\label{sec:field_information}

There are a number of utility methods within RBloomberg to help you identify fields available for calling. These were touched on in Section~\ref{sub:using_overrides} discussing overrides. Note that at this time, these fields rely on local information stored in .ovr and .bbfields and so can be used without making a connection to Bloomberg. As the next generation API has support for live field information, however, this will not always be the case.

\subsection{Field Mnemonics} % (fold)
\label{sub:field_mnemonics}

Mnemonics are what we typically think of as field names such as PX\_LAST or NAME. You can research available mnemonics within your Bloomberg terminal using the FLDS function, and you may find this the most convenient way to search.

To search (using grep) for all mnemonics matching a certain pattern, try:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=4,stepnumber=1]
search.mnemonics(@PYaB["]@PYaB[PX_LAST"])
\end{Verbatim}

    

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
 @lb[]1@rb[] "CRNCY_ADJ_PX_LAST"              "MTG_GEN_PX_LAST_UPDATE"        
 @lb[]3@rb[] "PROV_PX_LAST"                   "PX_LAST"                       
 @lb[]5@rb[] "PX_LAST_ACTUAL"                 "PX_LAST_ALL_SESSIONS"          
 @lb[]7@rb[] "PX_LAST_AM"                     "PX_LAST_ARROW_ALL_SESSION"     
 @lb[]9@rb[] "PX_LAST_AT_LONDON"              "PX_LAST_BOTH"                  
@lb[]11@rb[] "PX_LAST_ELEC"                   "PX_LAST_EURO"                  
@lb[]13@rb[] "PX_LAST_EVENING_PRICE_HELSINKI" "PX_LAST_EVENING_TRADE_HELSINKI"
@lb[]15@rb[] "PX_LAST_EXCH_CODE"              "PX_LAST_FORM_T"                
@lb[]17@rb[] "PX_LAST_INDIA"                  "PX_LAST_ITALY"                 
@lb[]19@rb[] "PX_LAST_LEGACY"                 "PX_LAST_LONDON"                
@lb[]21@rb[] "PX_LAST_PM"                     "PX_LAST_POST_SESSION"          
@lb[]23@rb[] "PX_LAST_PRE_SESSION"           
\end{Verbatim}

    

Once you know the mnemonic you wish to use, you can get more information about it like this:

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=8,stepnumber=1]
field.info(@PYaB["]@PYaB[PX_LAST"])
\end{Verbatim}

    

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
      category category.name subcategory subcategory.name field.id field.name
12719      195       Pricing           0               NA     0560 Last Price
      field.mnemonic mkt.bitmask data.bitmask data.type
12719        PX_LAST        4062           12         3
\end{Verbatim}

    

% subsection field_mnemonics (end)

% section field_information (end)

\section{Historical Data} % (fold)
\label{sec:historical_data}

The same blp() function is used for historical interday and intraday data requests:


\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=6,stepnumber=1]
blp @PYbd[<-] @PYap[function](conn, securities, fields, start @PYbd[=] @PYaD[NULL], end @PYbd[=] @PYaD[NULL],
                                barsize @PYbd[=] @PYaD[NULL], barfields @PYbd[=] @PYaD[NULL], retval @PYbd[=] @PYaD[NULL], 
                                override_fields @PYbd[=] @PYaD[NULL], overrides @PYbd[=] @PYaD[NULL], currency @PYbd[=] @PYaD[NULL]) {
\end{Verbatim}

    

\subsection{Intraday Data} % (fold)
\label{sub:intraday_data}

If you want daily or less frequent periodic data, or data for a specific day, then you want to make an intraday request.


\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=4,stepnumber=1]
blp(conn, @PYaB["]@PYaB[RYA ID Equity"], @PYaB["]@PYaB[PX_LAST"], Sys.Date() @PYbd[-] @PYaR[10])
blp(conn, @PYaB["]@PYaB[RYA ID Equity"], @PYaB["]@PYaB[PX_LAST"], @PYaB["]@PYaB[2009-01-01"], @PYaB["]@PYaB[2009-01-07"])
\end{Verbatim}

    

\begin{Verbatim}[commandchars=@\[\],numbers=left,firstnumber=1,stepnumber=1]
                    PX_LAST
2009-06-15 23:00:00   3.400
2009-06-16 23:00:00   3.360
2009-06-17 23:00:00   3.265
2009-06-18 23:00:00   3.220
2009-06-21 23:00:00   3.136
2009-06-22 23:00:00   3.220
2009-06-23 23:00:00   3.365
2009-06-24 23:00:00   3.250
2009-06-25 23:00:00   3.305
                    PX_LAST
2008-12-31 22:00:00      NA
2009-01-01 23:00:00   3.150
2009-01-04 23:00:00   3.240
2009-01-05 23:00:00   3.205
2009-01-06 23:00:00   3.168
\end{Verbatim}

    

If you pass just a start date, then all data from that start date up until the present is returned. You can also pass both a start and end date and this will determine the range of dates for which to return data. Dates can be passed as POSIX dates, strings in the form YYYY-MM-DD or any other format which can be coerced via a call to as.POSIXct().

Overrides can be passed in the same manner as for current data calls. Also there is a currency parameter, as documented in the Bloomberg API for the blpGetHistoricalData2 function. Again, test to be sure this is giving you what you expect as it does not apply to all fields.

% subsection intraday_data (end)



% section historical_data (end)


\end{document}
